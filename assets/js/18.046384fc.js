(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{602:function(t,v,_){"use strict";_.r(v);var e=_(3),a=Object(e.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),_("p",[t._v("只要了解实现原理，其实无论使用哪种地图渲染引擎都是一样的思路，用到地图 api 都是添加（清除）圆和添加（清除）点。下图为功能示例\n"),_("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b4da953f4bd42b688c17410f61c70fc~tplv-k3u1fbpfcp-watermark.image",alt:"image.png"}})]),t._v(" "),_("h2",{attrs:{id:"功能拆解"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#功能拆解"}},[t._v("#")]),t._v(" 功能拆解")]),t._v(" "),_("p",[t._v("该功能通常有两种方式自定义默认圆和根据中心点添加默认为 500 米的圆（实际场景一般为周边查询）")]),t._v(" "),_("p",[t._v("1、手动绘制圆,并添加至地图（市面上的地图引擎都有的方法不展开说明，下同）")]),t._v(" "),_("p",[t._v("2、获取圆的中心点")]),t._v(" "),_("p",[t._v("3、根据中心点计算拖拽按钮的坐标值，并添加至地图。经度坐标加 500 米处理，纬度坐标同中心点。")]),t._v(" "),_("p",[t._v("通常这一步经纬度坐标为 4326 也就是单位为度时，需要涉及坐标转换，转为 3857 投影坐标系单位为米，再进行加 500 的运算，"),_("a",{attrs:{href:"https://juejin.cn/post/6997729416381988878",target:"_blank",rel:"noopener noreferrer"}},[t._v("坐标转换可以看我的另一篇文章"),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("4、对拖拽按钮绑定事件 mousedown（鼠标点击按住）、mousemove(鼠标移动)、mouseup(鼠标松开)")]),t._v(" "),_("p",[_("strong",[t._v("鼠标移动时做些什么？")])]),t._v(" "),_("p",[t._v("1、首先禁用地图的移动事件")]),t._v(" "),_("p",[t._v("2、移除原始圆和按钮")]),t._v(" "),_("p",[t._v("3、根据当前鼠标位置计算圆的半径（已知中心点不变）和按钮的坐标值")]),t._v(" "),_("p",[t._v("4、添加新计算的圆和拖拽按钮")]),t._v(" "),_("p",[_("strong",[t._v("鼠标松开做什么？")])]),t._v(" "),_("p",[t._v("1、恢复地图的移动事件")]),t._v(" "),_("p",[t._v("2、通常绘制结束后我们需要调接口，因此执行回调函数。将半径中心点作为参数传入。")]),t._v(" "),_("h2",{attrs:{id:"总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),_("p",[t._v("以上就是实现拖拽圆的具体步骤，具体详细代码放在下篇。")])])}),[],!1,null,null,null);v.default=a.exports}}]);